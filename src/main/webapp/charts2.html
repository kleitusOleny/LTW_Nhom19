<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Thống Kê 2</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="popup.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: Mulish, sans-serif, serif;
        }

        body, html {
            overflow-x: hidden; /* Ẩn thanh cuộn ngang */
            width: 100%;
            scroll-behavior: smooth;
        }

        .dashboard-container {
            display: grid;
            min-height: 100vh;
            grid-template-columns: 250px 1fr
        }

        .dashboard-sidebar {
            background-color: #21232d;
            position: relative;
        }

        .dashboard-content {
            background-color: #f4f7fa;
        }

        .sidebar-items {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            list-style-type: none;
            position: fixed;
            top: 20px;
            height: 100vh;
            overflow-y: auto;
            width: 250px;
        }

        .group-avatar .user-avatar {
            border-radius: 100%;
            width: 120px;
            height: 120px;
            object-fit: cover;
            display: block;
            cursor: pointer;
            border: 3px solid transparent;
            transition: 0.2s;
        }

        .group-avatar {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 15px;
        }

        .user-avatar:hover {
            border-color: #6341ff;
        }

        .icon-header {
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            bottom: -5px;
            right: 5px;
            margin-left: 0;
            background-color: #3a3a3a;
            border-radius: 50%;
            padding: 6px;
            border: 2px solid #1f1f1f;
            line-height: 1;
            transition: 0.3s ease;
        }

        .icon-header:hover {
            color: #020202;
            transform: scale(1.1);
            background-color: #f8f8f8;
        }

        .a-with-icon {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            gap: 12px;
            font-size: 16px;
            font-weight: bold;
            padding: 12px 20px;
            border-radius: 8px;
            align-items: center;
            width: 200px;
            transition: background-color 0.3s ease, color 0.3s ease;
            border: 1px solid transparent;
        }

        .a-with-icon.selected {
            border-color: #6341ff;
            background-color: #343746;
            color: #ffffff;
        }

        .a-with-icon ion-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .a-with-icon:hover {
            border-color: #6341ff;
            background-color: #343746;
            color: #ffffff;
        }

        .text {
            color: #decdcd;
            font-size: 12px;
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            padding-bottom: 5px;
            box-sizing: border-box;
        }

        .dashboard-main-content {
            padding: 30px;
            background-color: #f4f7fa;
            flex-grow: 1;
        }

        .dashboard-main-content h1 {
            font-size: 28px;
            color: #21232d;
            text-align: center;
            margin-bottom: 10px;
        }

        /* Avatar */
        .modal-content-avatar {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 250px;
            padding: 20px 20px 20px 10px;
            gap: 8px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .btn-menu-item {
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
            width: 90%;
            padding: 10px;
            background: transparent;
            border: 1px solid #ccc;
            border-radius: 8px;
            text-align: left;
            font-size: 15px;
            color: #333;
            cursor: pointer;
        }

        .btn-menu-item:hover {
            border-color: #6341ff;
            transform: scale(1.02);
        }

        .modal-close2 {
            position: absolute;
            top: 1px;
            right: 0px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 20px;
            padding: 4px;
            line-height: 1;
            border-radius: 50%;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .modal-close2:hover {
            color: #111;
            background-color: #f0f0f0;
        }

        .btn-menu-item ion-icon {
            font-size: 18px;
            color: #555;
            flex-shrink: 0;
        }

        /* Notification */
        .modal-overlay-notification, .modal-overlay-avatar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            display: flex;
            justify-content: flex-start;

            align-items: flex-start;
            padding-left: 250px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-content-notification {
            width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .15);

            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            padding: 20px;
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .modal-overlay-notification.show, .modal-overlay-avatar.show {
            opacity: 1;
            visibility: visible;
        }

        .group-notification {
            display: flex;
            flex-direction: row;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border: 0;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            /*di chuyển không ảnh hưởng components khác*/
            transform: translateY(-10px)
        }

        .modal-close:hover {
            background: #f2f2f2;
        }

        .modal-close:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        .modal-close ion-icon {
            font-size: 22px;
            color: #333;
            pointer-events: none;
        }

        .notification-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #333;
            margin: 0 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            width: 100%;
        }

        .notification-empty-state {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            color: #888;
            padding: 30px 0;
        }

        .notification-empty-state ion-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .notification-empty-state p {
            font-size: 1rem;
            text-align: center;
            margin: 0;
        }

        /* ---------------------------- */
        .dashboard-main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: #f4f7fa;
            margin-bottom: 80px;
        }

        .group-chart, .group-chart2, .group-chart3, .group-chart4 {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid transparent;
        }

        .group-chart:hover, .group-chart2:hover, .group-chart3:hover, .group-chart4:hover {
            border-color: #6341ff;
        }

        .group-switch {
            position: fixed;
            bottom: 20px;
            left: 300px;
            display: flex;
            justify-content: center;
            gap: 15px;
            align-items: center;
            background-color: #fff;
            padding: 10px 15px;
            border-radius: 12px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }

        .group-switch button {
            background: #efefef;
            padding: 15px 20px 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            border: none;
        }

        .group-switch button:hover {
            background: #6341ff;
            color: #fff;
            transform: scale(1.05);
            transition: transform 0.2s ease;
        }

        .group-switch .group-p {
            display: flex;
            flex-direction: row;
            gap: 5px;
        }

        .group-switch #p1 {
            color: #6c757d;
        }

        .group-switch #p2 {
            color: #8d93ff;
        }

        .selected-btn {
            color: #0925c7;
            outline: 2px solid #a4abf6;
        }

        .total-revenue {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .total-revenue .number {
            color: #3314ff;
        }
    </style>
</head>
<body>
<div class="dashboard-container">
    <nav class="dashboard-sidebar">
        <ul class="sidebar-items">
            <div class="group-avatar">
                <img src="assets/avatar.jpg" class="user-avatar" id="avatar-modal-btn"/>
                <ion-icon name="notifications-outline" class="icon-header" id="notification-modal-btn"></ion-icon>
            </div>
            <li><a href="admin_dashboard.html" class="a-with-icon">
                <ion-icon name="home-outline"></ion-icon>
                Trang Chủ</a></li>
            <li><a href="manage_product.html" class="a-with-icon">
                <ion-icon name="bag-remove-outline"></ion-icon>
                Quản Lí Sản Phẩm</a></li>
            <li><a href="manage_accounts.html" class="a-with-icon">
                <ion-icon name="people-outline"></ion-icon>
                Quản Lí Tài Khoản Khách</a></li>
            <li><a href="manage_orders.html" class="a-with-icon">
                <ion-icon name="cart-outline"></ion-icon>
                Quản Lí Đơn Hàng</a></li>
            <li><a href="manage_banner.html" class="a-with-icon">
                <ion-icon name="albums-outline"></ion-icon>
                Quản Lí Banner</a></li>
            <li><a href="manage_blog.html" class="a-with-icon">
                <ion-icon name="reader-outline"></ion-icon>
                Quản Lí Blog và Tin Tức</a></li>
            <li><a href="manage_promotions.html" class="a-with-icon">
                <ion-icon name="ticket-outline"></ion-icon>
                Quản Lí Mã Giảm Giá và Khuyến Mãi</a></li>
            <li><a href="charts.html" class="a-with-icon selected">
                <ion-icon name="stats-chart"></ion-icon>
                Thống Kê</a></li>
        </ul>
        <div class="text">━ Được update tới 2025 ━</div>
    </nav>
    <div class="dashboard-content">
        <main class="dashboard-main-content">
            <h1>Tổng quan thống kê về sản phẩm</h1>
            <div class="group-chart4">
                <h2>Doanh thu theo tháng</h2>
                <div class="total-revenue">
                    <h5>Tổng doanh thu:</h5>
                    <h5 class="number">2679 triệu vnđ</h5>
                </div>
                <div id="chart-revenue"></div>
            </div>
            <div class="group-chart">
                <h2>Số lượng sản phẩm đã bán và tồn đọng</h2>
                <div id="chart"></div>
            </div>
            <div class="group-chart2">
                <h2>Top 5 sản phẩm bán chạy nhất trong tháng</h2>
                <div id="chart2"></div>
            </div>
            <div class="group-chart3">
                <h2>Sản phẩm được yêu thích nhất theo tháng</h2>
                <div id="chart-column"></div>
            </div>
            <div class="group-switch">
                <a href="charts.html">
                    <button class="unselected-btn">1</button>
                </a>
                <a href="charts2.html">
                    <button class="selected-btn">2</button>
                </a>
                <div class="group-p">
                    <p id="p1">Bạn hiện đang ở</p>
                    <p id="p2">Trang 2</p>
                </div>
            </div>
        </main>
    </div>
</div>
<div class="modal-overlay-notification" id="notification-account-modal">
    <div class="modal-content-notification">
        <div class="group-notification">
            <h2 class="notification-title">Thông báo</h2>
            <button class="modal-close" id="close-modal-btn8">
                <ion-icon name="close-outline"></ion-icon>
            </button>
        </div>
        <div class="notification-empty-state">
            <ion-icon name="notifications-off-outline"></ion-icon>
            <p>Hiện tại chưa có thông báo mới</p>
        </div>
    </div>
</div>
<div class="modal-overlay-avatar" id="avatar-account-modal">
    <div class="modal-content-avatar">
        <button class="modal-close2" id="close-modal-btn9">
            <ion-icon name="close-outline"></ion-icon>
        </button>
        <button class="btn-menu-item">
            <ion-icon name="person-circle-outline"></ion-icon>
            <span>Trở về trang người dùng</span>
        </button>
        <button class="btn-menu-item">
            <ion-icon name="log-out-outline"></ion-icon>
            <span>Đăng xuất tài khoản</span>
        </button>
    </div>
</div>

<script>
    var options4 = {
        series: [{
            name: 'Doanh Thu',
            type: 'column',
            data: [550, 947, 930, 564, 957, 807, 700, 760, 577]
        }, {
            name: 'Tỉ lệ so với tháng trước',
            type: 'line',
            data: [0, 72.18, -1.8, -39.35, 69.68, -15.67, -13.26, 8.57, -24.08]
        }],
        chart: {
            height: 350,
            type: 'line',
        },
        stroke: {
            width: [0, 4]
        },
        dataLabels: {
            enabled: true,
            enabledOnSeries: [1],
            formatter: function (val) {
                return val + "%"
            }
        },
        labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9'],
        yaxis: [{
            title: {
                text: 'Doanh Thu',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold',
                    fontFamily: 'Mulish, sans-serif, serif',
                    color: '#333'
                }
            },
        }, {
            opposite: true,
            title: {
                text: 'Tỉ lệ',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold',
                    fontFamily: 'Mulish, sans-serif, serif',
                    color: '#333'
                }
            },
        }],
        tooltip: {
            y: {
                formatter: function (val, {seriesIndex}) {
                    // seriesIndex là biến xác định dòng dữ liệu
                    if (seriesIndex === 0) {
                        return val + " triệu vnđ";
                    }
                    if (seriesIndex === 1) {
                        return val + "%";
                    }
                    return val;
                }
            }
        }
    };

    var chart4 = new ApexCharts(document.querySelector("#chart-revenue"), options4);
    chart4.render();
    /* ---- */
    var options = {
        series: [{
            name: 'Đã bán',
            data: [108, 79, 94, 54, 66, 128, 101, 77, 86]
        }, {
            name: 'Tồn đọng',
            data: [11, 32, 45, 73, 34, 52, 67, 98, 70]
        }],
        chart: {
            height: 350,
            type: 'area'
        },
        dataLabels: {
            enabled: false
        },
        colors: ['#31f631', '#0c74e7'],
        stroke: {
            curve: 'smooth'
        },
        xaxis: {
            categories: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9']
        },
        yaxis: {
            title: {
                text: 'Số lượng',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold',
                    fontFamily: 'Mulish, sans-serif, serif',
                    color: '#333'
                }
            }
        },
        tooltip: {
            y: {
                formatter: function (val) {
                    return val + " sản phẩm";
                }
            }
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart"), options);
    chart.render();
    // -------
    var options2 = {
        series: [{
            name: 'Rượu Vang Trắng Greywacke Pinot Noir 2022',
            data: [44, 55, 41, 67, 0, 43, 0, 49, 68]
        }, {
            name: 'Rượu vang sủi Freixenet Italian Rosé Sparkling Wine',
            data: [13, 23, 20, 0, 0, 27, 33, 12, 0]
        }, {
            name: 'Rượu vang hồng Dufouleur Monopole',
            data: [11, 17, 0, 15, 24, 0, 0, 0, 34]
        }, {
            name: 'Rượu vang hồng Famille Perrin Côtes-du-Rhône Réserve',
            data: [20, 17, 15, 0, 21, 0, 15, 60, 0]
        }, {
            name: 'Rượu vang hồng Studio By Miraval',
            data: [28, 30, 0, 19, 36, 19, 18, 35, 0]
        }, {
            name: 'Rượu Sâm Panh Champagne Ruinart Rosé',
            data: [0, 0, 19, 20, 60, 23, 48, 41, 25]
        }, {
            name: 'Rượu vang hồng Flor de Muga Rosé',
            data: [0, 0, 19, 49, 60, 23, 48, 0, 64]
        }, {
            name: 'Rượu Vang Hồng Tenuta Ammiraglia Alìe',
            data: [0, 0, 0, 0, 0, 0, 0, 0, 57]
        }],
        chart: {
            type: 'bar',
            height: 350,
            stacked: true,
            stackType: '100%'
        },
        colors: [
            '#c247ff', '#838386', '#2ed573', '#ffa502', '#3742fa', '#ff6b81', '#70a1ff', '#7bed9f', '#04ffae', '#ffd32a'
        ],
        responsive: [{
            breakpoint: 480,
            options: {
                legend: {
                    position: 'bottom',
                    offsetX: -10,
                    offsetY: 0
                }
            }
        }],
        xaxis: {
            categories: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6',
                'Tháng 7', 'Tháng 8', 'Tháng 9'
            ],
        },
        fill: {
            opacity: 1
        },
        legend: {
            position: 'bottom',
            offsetX: 0,
            offsetY: 10
        },
        yaxis: {
            title: {
                text: 'Số lượng',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold',
                    fontFamily: 'Mulish, sans-serif, serif',
                    color: '#333'
                }
            }
        },
        tooltip: {
            y: {
                formatter: function (val) {
                    return val + " đã bán";
                }
            }
        }
    };

    var chart2 = new ApexCharts(document.querySelector("#chart2"), options2);
    chart2.render();

    /* ---- */
    var wineNames = ["Rượu Vang Đỏ Luce Brunello Di Montalcino 2017", "Rượu Vang Đỏ Sandrone Barolo Le Vigne – 1.5L 2014", "Rượu Vang Đỏ Muga Prado Enea Gran Reserva 2014", "Rượu Vang Trắng Greywacke Pinot Noir 2022", "Rượu vang sủi Freixenet Italian Rosé Sparkling Wine Extra Dry", "Rượu vang hồng Dufouleur Monopole", "Rượu vang hồng Famille Perrin Côtes-du-Rhône Réserve, rose", "Rượu Sâm Panh Champagne Ruinart Rosé", "Rượu vang hồng Flor de Muga Rosé"];
    var options3 = {
        series: [{
            name: 'Loại',
            data: [23, 31, 40, 101, 40, 36, 32, 41, 65]
        }],
        chart: {
            height: 350,
            type: 'bar'
        },
        plotOptions: {
            bar: {
                borderRadius: 2,
                dataLabels: {
                    position: 'top', // top, center, bottom
                },
            }
        },
        dataLabels: {
            enabled: true,
            formatter: function (val, opts) {
                return val + ' lượt thích';
            },
            offsetY: -22,
            style: {
                fontSize: '13px',
                colors: ["#3b2d7c"]
            }
        },

        xaxis: {
            categories: ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6", "Tháng 7", "Tháng 8", "Tháng 9"],
            position: 'top',
            axisBorder: {
                show: false
            },
            axisTicks: {
                show: false
            },
            crosshairs: {
                fill: {
                    type: 'gradient',
                    gradient: {
                        colorFrom: '#D8E3F0',
                        colorTo: '#BED1E6',
                        stops: [0, 100],
                        opacityFrom: 0.4,
                        opacityTo: 0.5,
                    }
                }
            },
        },
        tooltip: {
            enabled: true,
            theme: 'light',
            style: {
                fontSize: '12px',
            },
            y: {
                formatter: function (val, {dataPointIndex}) {
                    var wineName = wineNames[dataPointIndex];
                    return wineName + ' ' + "(" + val + " lượt)";
                },
                title: {
                    formatter: (seriesName) => seriesName + ":",
                }
            },
            fixed: {
                enabled: false,
                position: 'topRight'
            }
        },
        yaxis: {
            title: {
                text: 'Lượt thích',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold',
                    fontFamily: 'Mulish, sans-serif, serif',
                    color: '#333'
                }
            },
            axisBorder: {
                show: false
            },
            axisTicks: {
                show: false,
            },
        },
    };

    var chart3 = new ApexCharts(document.querySelector("#chart-column"), options3);
    chart3.render();
</script>
<script>
    // Run Pop-up function
    document.addEventListener("DOMContentLoaded", function () {
        setupModal('notification-account-modal', 'notification-modal-btn', 'close-modal-btn8');
        setupModal('avatar-account-modal', 'avatar-modal-btn', 'close-modal-btn9');
    });
</script>
</body>
</html>